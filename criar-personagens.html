<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Personagem - RPG System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Logo ap√≥s o title -->
  
    <link rel="stylesheet" href="style-atributos.css">
    <link rel="stylesheet" href="style-caracteristicas.css">
    <link rel="stylesheet" href="style-vantagens.css">
    <link rel="stylesheet" href="style-pericias.css">
    <link rel="stylesheet" href="style-magias.css">
    <link rel="stylesheet" href="style-equipamentos.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('Cris2.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            min-height: 100vh;
        }

        /* Header do Personagem */
        .char-header {
            background: rgba(30, 30, 40, 0.9);
            padding: 15px 20px;
            border-bottom: 2px solid rgba(255, 140, 0, 0.3);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .char-header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .char-name-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .char-name-input {
            background: transparent;
            border: none;
            color: #ffd700;
            font-size: 1.5rem;
            font-weight: bold;
            padding: 8px 12px;
            border-bottom: 2px solid rgba(255, 140, 0, 0.3);
            min-width: 250px;
            max-width: 400px;
        }

        .char-name-input:focus {
            outline: none;
            border-color: #ff8c00;
        }

        .char-actions {
            display: flex;
            gap: 12px;
        }

        .btn-header {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-salvar {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-excluir {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            border: 1px solid rgba(231, 76, 60, 0.3);
        }

        .btn-sair {
            background: rgba(255, 255, 255, 0.1);
            color: #ccc;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Navega√ß√£o de Abas */
        .char-tabs {
            background: rgba(20, 20, 30, 0.8);
            border-bottom: 1px solid rgba(255, 140, 0, 0.2);
            overflow-x: auto;
            position: sticky;
            top: 80px;
            z-index: 99;
        }

        .tabs-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 5px;
            padding: 0 20px;
        }

        .tab-btn {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            color: #ff8c00;
            background: rgba(255, 140, 0, 0.1);
        }

        .tab-btn.active {
            color: #ffd700;
            border-bottom-color: #ff8c00;
            background: rgba(255, 140, 0, 0.1);
        }

        /* Conte√∫do das Abas */
        .char-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .char-header-content {
                flex-direction: column;
                gap: 15px;
            }

            .char-name-section {
                width: 100%;
                justify-content: center;
            }

            .char-name-input {
                min-width: 200px;
                font-size: 1.3rem;
                text-align: center;
            }

            .char-actions {
                width: 100%;
                justify-content: center;
            }

            .btn-header {
                padding: 8px 15px;
                font-size: 0.9rem;
            }

            .tabs-container {
                padding: 0 10px;
                gap: 2px;
            }

            .tab-btn {
                padding: 10px 12px;
                font-size: 0.8rem;
            }

            .tab-btn i {
                display: none;
            }
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 60px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 140, 0, 0.3);
            border-left: 4px solid #ff8c00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header do Personagem -->
    <header class="char-header">
        <div class="char-header-content">
            <div class="char-name-section">
                <input type="text" id="charName" class="char-name-input" placeholder="Nome do Personagem" value="Novo Personagem">
            </div>
            <div class="char-actions">
                <button class="btn-header btn-salvar" id="btnSalvar">
                    <i class="fas fa-save"></i>
                    Salvar
                </button>
                <button class="btn-header btn-excluir" id="btnExcluir">
                    <i class="fas fa-trash"></i>
                    Excluir
                </button>
                <button class="btn-header btn-sair" id="btnSair">
                    <i class="fas fa-sign-out-alt"></i>
                    Sair
                </button>
            </div>
        </div>
    </header>

    <!-- Navega√ß√£o de Abas -->
    <nav class="char-tabs">
        <div class="tabs-container">
            <button class="tab-btn active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </button>
            <button class="tab-btn" data-tab="atributos">
                <i class="fas fa-dumbbell"></i>
                Atributos
            </button>
            <button class="tab-btn" data-tab="caracteristicas">
                <i class="fas fa-user-tie"></i>
                Caracter√≠sticas
            </button>
            <button class="tab-btn" data-tab="vantagens">
                <i class="fas fa-star"></i>
                Vantagens
            </button>
            <button class="tab-btn" data-tab="pericias">
                <i class="fas fa-graduation-cap"></i>
                Per√≠cias
            </button>
          
            <button class="tab-btn" data-tab="magia">
                <i class="fas fa-hat-wizard"></i>
                Magias
            </button>
            <button class="tab-btn" data-tab="equipamento">
                <i class="fas fa-backpack"></i>
                Equipamento
            </button>
            <button class="tab-btn" data-tab="resumo">
                <i class="fas fa-file-alt"></i>
                Resumo
            </button>
        </div>
    </nav>

    <!-- Conte√∫do das Abas -->
    <main class="char-content">
        
        <!-- ABA DASHBOARD -->
        <div id="dashboard" class="tab-content active">
            <div class="loading">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- ABA ATRIBUTOS -->
        <div id="atributos" class="tab-content">
            <div class="atributos-container">
                <!-- Se√ß√£o de Pontos -->
                <div class="pontos-section">
                    <div class="ponto-card total">
                        <h3>Pontos Totais</h3>
                        <div class="ponto-valor" id="pontosTotais">150</div>
                    </div>
                    <div class="ponto-card gastos">
                        <h3>Pontos Gastos</h3>
                        <div class="ponto-valor" id="pontosGastos">0</div>
                    </div>
                    <div class="ponto-card saldo">
                        <h3>Saldo Dispon√≠vel</h3>
                        <div class="ponto-valor" id="pontosSaldo">150</div>
                    </div>
                </div>

                <!-- Atributos Principais -->
                <div class="atributos-principais">
                    <h2 class="secao-titulo">Atributos Principais</h2>
                    <div class="cards-grid principais-grid">
                        <!-- ST -->
                        <div class="atributo-card">
                            <div class="atributo-header">
                                <h3>FOR√áA (ST)</h3>
                                <span class="custo-pontos" id="custoST">0</span>
                            </div>
                            <div class="atributo-controles">
                                <button class="btn-controle" onclick="alterarAtributo('ST', -1)">-</button>
                                <input type="number" id="ST" class="atributo-input" value="10" min="1" max="40">
                                <button class="btn-controle" onclick="alterarAtributo('ST', 1)">+</button>
                            </div>
                            <div class="atributo-desc">Custo: 10 pontos por n√≠vel</div>
                        </div>

                        <!-- DX -->
                        <div class="atributo-card">
                            <div class="atributo-header">
                                <h3>DESTREZA (DX)</h3>
                                <span class="custo-pontos" id="custoDX">0</span>
                            </div>
                            <div class="atributo-controles">
                                <button class="btn-controle" onclick="alterarAtributo('DX', -1)">-</button>
                                <input type="number" id="DX" class="atributo-input" value="10" min="1" max="40">
                                <button class="btn-controle" onclick="alterarAtributo('DX', 1)">+</button>
                            </div>
                            <div class="atributo-desc">Custo: 20 pontos por n√≠vel</div>
                        </div>

                        <!-- IQ -->
                        <div class="atributo-card">
                            <div class="atributo-header">
                                <h3>INTELIG√äNCIA (IQ)</h3>
                                <span class="custo-pontos" id="custoIQ">0</span>
                            </div>
                            <div class="atributo-controles">
                                <button class="btn-controle" onclick="alterarAtributo('IQ', -1)">-</button>
                                <input type="number" id="IQ" class="atributo-input" value="10" min="1" max="40">
                                <button class="btn-controle" onclick="alterarAtributo('IQ', 1)">+</button>
                            </div>
                            <div class="atributo-desc">Custo: 20 pontos por n√≠vel</div>
                        </div>

                        <!-- HT -->
                        <div class="atributo-card">
                            <div class="atributo-header">
                                <h3>VIGOR (HT)</h3>
                                <span class="custo-pontos" id="custoHT">0</span>
                            </div>
                            <div class="atributo-controles">
                                <button class="btn-controle" onclick="alterarAtributo('HT', -1)">-</button>
                                <input type="number" id="HT" class="atributo-input" value="10" min="1" max="40">
                                <button class="btn-controle" onclick="alterarAtributo('HT', 1)">+</button>
                            </div>
                            <div class="atributo-desc">Custo: 10 pontos por n√≠vel</div>
                        </div>
                    </div>
                </div>

                <!-- Atributos Secund√°rios -->
                <div class="atributos-secundarios">
                    <h2 class="secao-titulo">Atributos Secund√°rios</h2>
                    <div class="cards-grid secundarios-grid">
                        <!-- PV -->
                        <div class="secundario-card">
                            <h3>PONTOS DE VIDA (PV)</h3>
                            <div class="secundario-base">
                                <span class="base-label">Base:</span>
                                <span class="base-valor" id="PVBase">10</span>
                            </div>
                            <div class="bonus-section">
                                <span class="bonus-label">B√¥nus/Redutor:</span>
                                <input type="number" id="bonusPV" class="bonus-input" value="0" min="-10" max="10">
                            </div>
                            <div class="secundario-total">
                                <span class="total-label">Total:</span>
                                <span class="total-valor" id="PVTotal">10</span>
                            </div>
                            <div class="secundario-desc">Baseado em ST</div>
                        </div>

                        <!-- PF -->
                        <div class="secundario-card">
                            <h3>PONTOS DE FADIGA (PF)</h3>
                            <div class="secundario-base">
                                <span class="base-label">Base:</span>
                                <span class="base-valor" id="PFBase">10</span>
                            </div>
                            <div class="bonus-section">
                                <span class="bonus-label">B√¥nus/Redutor:</span>
                                <input type="number" id="bonusPF" class="bonus-input" value="0" min="-10" max="10">
                            </div>
                            <div class="secundario-total">
                                <span class="total-label">Total:</span>
                                <span class="total-valor" id="PFTotal">10</span>
                            </div>
                            <div class="secundario-desc">Baseado em HT</div>
                        </div>

                        <!-- Vontade -->
                        <div class="secundario-card">
                            <h3>VONTADE</h3>
                            <div class="secundario-base">
                                <span class="base-label">Base:</span>
                                <span class="base-valor" id="VontadeBase">10</span>
                            </div>
                            <div class="bonus-section">
                                <span class="bonus-label">B√¥nus/Redutor:</span>
                                <input type="number" id="bonusVontade" class="bonus-input" value="0" min="-10" max="10">
                            </div>
                            <div class="secundario-total">
                                <span class="total-label">Total:</span>
                                <span class="total-valor" id="VontadeTotal">10</span>
                            </div>
                            <div class="secundario-desc">Baseado em IQ</div>
                        </div>

                        <!-- Percep√ß√£o -->
                        <div class="secundario-card">
                            <h3>PERCEP√á√ÉO</h3>
                            <div class="secundario-base">
                                <span class="base-label">Base:</span>
                                <span class="base-valor" id="PercepcaoBase">10</span>
                            </div>
                            <div class="bonus-section">
                                <span class="bonus-label">B√¥nus/Redutor:</span>
                                <input type="number" id="bonusPercepcao" class="bonus-input" value="0" min="-10" max="10">
                            </div>
                            <div class="secundario-total">
                                <span class="total-label">Total:</span>
                                <span class="total-valor" id="PercepcaoTotal">10</span>
                            </div>
                            <div class="secundario-desc">Baseado em IQ</div>
                        </div>

                        <!-- Deslocamento -->
                        <div class="secundario-card">
                            <h3>DESLOCAMENTO</h3>
                            <div class="secundario-base">
                                <span class="base-label">Base:</span>
                                <span class="base-valor" id="DeslocamentoBase">5.00</span>
                            </div>
                            <div class="bonus-section">
                                <span class="bonus-label">B√¥nus/Redutor:</span>
                                <input type="number" id="bonusDeslocamento" class="bonus-input" value="0" min="-5" max="5" step="0.25">
                            </div>
                            <div class="secundario-total">
                                <span class="total-label">Total:</span>
                                <span class="total-valor" id="DeslocamentoTotal">5.00</span>
                            </div>
                            <div class="secundario-desc">(DX + HT) / 4</div>
                        </div>
                    </div>
                </div>

                <!-- Sistema de Combate -->
                <div class="combate-section">
                    <h2 class="secao-titulo">Sistema de Combate</h2>
                    <div class="cards-grid combate-grid">
                        <!-- Dano Base -->
                        <div class="combate-card">
                            <h3>DANO B√ÅSICO</h3>
                            <div class="dano-container">
                                <div class="dano-tipo">
                                    <span class="dano-label">GDP:</span>
                                    <span class="dano-valor" id="danoGDP">1d-2</span>
                                </div>
                                <div class="dano-tipo">
                                    <span class="dano-label">GEB:</span>
                                    <span class="dano-valor" id="danoGEB">1d</span>
                                </div>
                            </div>
                            <div class="combate-desc">Baseado em ST</div>
                        </div>

                        <!-- N√≠veis de Carga -->
                        <div class="combate-card">
                            <h3>N√çVEIS DE CARGA</h3>
                            <div class="carga-container">
                                <div class="carga-item">
                                    <span class="carga-label">Nenhuma:</span>
                                    <span class="carga-valor" id="cargaNenhuma">10.0</span>
                                </div>
                                <div class="carga-item">
                                    <span class="carga-label">Leve:</span>
                                    <span class="carga-valor" id="cargaLeve">20.0</span>
                                </div>
                                <div class="carga-item">
                                    <span class="carga-label">M√©dia:</span>
                                    <span class="carga-valor" id="cargaMedia">30.0</span>
                                </div>
                                <div class="carga-item">
                                    <span class="carga-label">Pesada:</span>
                                    <span class="carga-valor" id="cargaPesada">60.0</span>
                                </div>
                                <div class="carga-item">
                                    <span class="carga-label">Muito Pesada:</span>
                                    <span class="carga-valor" id="cargaMuitoPesada">100.0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

       <!-- ABA CARACTER√çSTICAS -->
<div id="caracteristicas" class="tab-content">
    <div class="caracteristicas-container">
        <!-- CARDS SUPERIORES - APAR√äNCIA E RIQUEZA -->
        <div class="caracteristicas-grid">
            <!-- CARD APAR√äNCIA F√çSICA -->
            <div class="caracteristica-card">
                <div class="card-header">
                    <i class="fas fa-user"></i>
                    <h3>Apar√™ncia F√≠sica</h3>
                    <span class="pontos-badge" id="pontosAparencia">0 pts</span>
                </div>
                <div class="card-content">
                    <div class="select-group">
                        <label>N√≠vel de Apar√™ncia:</label>
                        <select id="nivelAparencia" class="form-select">
                            <option value="-24">Horrendo [-24 pts]</option>
                            <option value="-20">Monstruoso [-20 pts]</option>
                            <option value="-16">Hediondo [-16 pts]</option>
                            <option value="-8">Feio [-8 pts]</option>
                            <option value="-4">Sem Atrativos [-4 pts]</option>
                            <option value="0" selected>Comum [0 pts]</option>
                            <option value="4">Atraente [+4 pts]</option>
                            <option value="12">Elegante [+12 pts]</option>
                            <option value="16">Muito Elegante [+16 pts]</option>
                            <option value="20">Lindo [+20 pts]</option>
                        </select>
                    </div>
                    <div class="info-display" id="displayAparencia">
                        <strong>Comum</strong>
                        <br><small>Rea√ß√£o: +0</small>
                        <br><small>Apar√™ncia padr√£o, sem modificadores</small>
                    </div>
                </div>
            </div>

            <!-- CARD N√çVEL DE RIQUEZA -->
            <div class="caracteristica-card">
                <div class="card-header">
                    <i class="fas fa-coins"></i>
                    <h3>N√≠vel de Riqueza</h3>
                    <span class="pontos-badge" id="pontosRiqueza">0 pts</span>
                </div>
                <div class="card-content">
                    <div class="select-group">
                        <label>N√≠vel de Riqueza:</label>
                        <select id="nivelRiqueza" class="form-select">
                            <option value="-25">Falido [-25 pts]</option>
                            <option value="-15">Pobre [-15 pts]</option>
                            <option value="-10">Batalhador [-10 pts]</option>
                            <option value="0" selected>M√©dio [0 pts]</option>
                            <option value="10">Confort√°vel [+10 pts]</option>
                            <option value="20">Rico [+20 pts]</option>
                            <option value="30">Muito Rico [+30 pts]</option>
                            <option value="50">Podre de Rico [+50 pts]</option>
                        </select>
                    </div>
                    <div class="info-display" id="displayRiqueza">
                        <strong>M√©dio</strong>
                        <br><small>Multiplicador: 1x</small>
                        <br><small>N√≠vel de recursos pr√©-definido padr√£o</small>
                    </div>
                    <div class="renda-info">
                        <small>Renda Mensal Estimada: <span id="rendaMensal">$1.000</span></small>
                    </div>
                </div>
            </div>
        </div>

        <!-- CARD IDIOMAS -->
        <div class="caracteristica-card full-width">
            <div class="card-header">
                <i class="fas fa-globe"></i>
                <h3>Idiomas</h3>
                <span class="pontos-badge" id="pontosIdiomas">0 pts</span>
            </div>
            <div class="card-content">
                <!-- IDIOMA MATERNO -->
                <div class="idioma-section">
                    <h4>Idioma Materno</h4>
                    <div class="idioma-materno">
                        <input type="text" id="idiomaMaternoNome" value="Comum" placeholder="Nome do idioma materno" class="form-input">
                        <span class="nivel-info">Nativo (0 pts)</span>
                    </div>
                </div>

                <!-- ADICIONAR NOVO IDIOMA -->
                <div class="idioma-section">
                    <h4>Adicionar Idioma</h4>
                    <div class="add-idioma-form">
                        <input type="text" id="novoIdiomaNome" placeholder="Digite o nome do idioma" class="form-input">
                        
                        <div class="niveis-container">
                            <div class="nivel-group">
                                <label>üó£Ô∏è N√≠vel de Fala:</label>
                                <select id="novoIdiomaFala" class="form-select">
                                    <option value="0">Nenhum (0 pts)</option>
                                    <option value="2" selected>Rudimentar (2 pts)</option>
                                    <option value="4">Sotaque (4 pts)</option>
                                    <option value="6">Nativo (6 pts)</option>
                                </select>
                            </div>
                            
                            <div class="nivel-group">
                                <label>üìù N√≠vel de Escrita:</label>
                                <select id="novoIdiomaEscrita" class="form-select">
                                    <option value="0" selected>Nenhum (0 pts)</option>
                                    <option value="2">Rudimentar (1 pt)</option>
                                    <option value="4">Sotaque (2 pts)</option>
                                    <option value="6">Nativo (3 pts)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="add-idioma-actions">
                            <span class="custo-preview">Custo: <span id="custoIdiomaPreview">+2 pts</span></span>
                            <button id="btnAdicionarIdioma" class="btn-primary">
                                <i class="fas fa-plus"></i> Adicionar Idioma
                            </button>
                        </div>
                    </div>
                </div>

                <!-- LISTA DE IDIOMAS ADICIONAIS -->
                <div class="idioma-section">
                    <h4>Idiomas Adicionais <small>(<span id="totalIdiomas">0</span> idiomas)</small></h4>
                    <div id="listaIdiomasAdicionais" class="idiomas-lista">
                        <div class="empty-state">
                            Nenhum idioma adicional adicionado
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CARACTER√çSTICAS F√çSICAS E ALTURA/PESO -->
        <div class="caracteristicas-grid">
            <!-- CARD CARACTER√çSTICAS F√çSICAS -->
            <div class="caracteristica-card">
                <div class="card-header">
                    <i class="fas fa-weight"></i>
                    <h3>Caracter√≠sticas F√≠sicas</h3>
                    <span class="pontos-badge" id="pontosCaracteristicas">0 pts</span>
                </div>
                <div class="card-content">
                    <div class="caracteristicas-lista">
                        <div class="caracteristica-item" data-tipo="magro">
                            <div class="caracteristica-info">
                                <strong>Magro</strong>
                                <small>-5 pts | Peso: 67% do normal</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                        
                        <div class="caracteristica-item" data-tipo="acima-peso">
                            <div class="caracteristica-info">
                                <strong>Acima do Peso</strong>
                                <small>-1 pt | Peso: 130% do normal</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                        
                        <div class="caracteristica-item" data-tipo="gordo">
                            <div class="caracteristica-info">
                                <strong>Gordo</strong>
                                <small>-3 pts | Peso: 150% do normal</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                        
                        <div class="caracteristica-item" data-tipo="muito-gordo">
                            <div class="caracteristica-info">
                                <strong>Muito Gordo</strong>
                                <small>-5 pts | Peso: 200% do normal</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                        
                        <div class="caracteristica-item" data-tipo="nanismo">
                            <div class="caracteristica-info">
                                <strong>Nanismo</strong>
                                <small>-15 pts | MT -1, -1 Deslocamento</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                        
                        <div class="caracteristica-item" data-tipo="gigantismo">
                            <div class="caracteristica-info">
                                <strong>Gigantismo</strong>
                                <small>0 pts | MT +1, +1 Deslocamento</small>
                            </div>
                            <button class="btn-add-caracteristica">Adicionar</button>
                        </div>
                    </div>
                    
                    <!-- CARACTER√çSTICAS SELECIONADAS -->
                    <div id="caracteristicasSelecionadas" class="caracteristicas-selecionadas">
                        <!-- Din√¢mico - caracter√≠sticas adicionadas aparecem aqui -->
                    </div>
                </div>
            </div>

            <!-- CARD ALTURA E PESO - VERS√ÉO COM DESVANTAGENS ATIVAS -->
            <div class="caracteristica-card">
                <div class="card-header">
                    <i class="fas fa-ruler-combined"></i>
                    <h3>Altura e Peso</h3>
                    <span class="status-badge" id="statusFisico">Normal</span>
                </div>
                <div class="card-content">
                    <!-- CONTROLES ALTURA -->
                    <div class="fisica-control">
                        <label>üìè Altura (metros):</label>
                        <div class="controle-numerico">
                            <button class="btn-controle" onclick="ajustarAltura(-0.01)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" id="altura" value="1.70" step="0.01" min="1.30" max="2.50" class="fisica-input">
                            <button class="btn-controle" onclick="ajustarAltura(0.01)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="statusAltura" class="status-info"></div>
                    </div>

                    <!-- CONTROLES PESO -->
                    <div class="fisica-control">
                        <label>‚öñÔ∏è Peso (kg):</label>
                        <div class="controle-numerico">
                            <button class="btn-controle" onclick="ajustarPeso(-1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" id="peso" value="70" step="1" min="30" max="200" class="fisica-input">
                            <button class="btn-controle" onclick="ajustarPeso(1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div id="statusPeso" class="status-info"></div>
                    </div>

                    <!-- NOVA SE√á√ÉO: DESVANTAGENS ATIVAS -->
                    <div class="desvantagens-ativas" id="desvantagensAtivas" style="display: none;">
                        <div class="desvantagens-header">
                            <i class="fas fa-list-check"></i>
                            <h4>Desvantagens F√≠sicas Ativas</h4>
                        </div>
                        <div class="desvantagens-lista" id="listaDesvantagens">
                            <!-- As desvantagens aparecer√£o aqui automaticamente -->
                        </div>
                    </div>

                    <!-- INFO BASE ST - CORRIGIDO -->
                    <div class="fisica-info">
                        <div class="info-row">
                            <span>ST Base:</span>
                            <strong id="stBase">10</strong>
                        </div>
                        <div class="info-row">
                            <span>Faixa de Altura (ST):</span>
                            <span id="alturaFaixa">1.58m - 1.83m</span>
                        </div>
                        <div class="info-row">
                            <span>Faixa de Peso (ST):</span>
                            <span id="pesoFaixa">57.5kg - 87.5kg</span>
                        </div>
                        <div class="info-row">
                            <span>Status:</span>
                            <span id="modificadorPeso">Dentro da faixa</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ABA VANTAGENS & DESVANTAGENS -->
<div id="vantagens" class="tab-content">
    <div class="atributos-container">
        <!-- CARD DE RESUMO DE PONTOS -->
        <div class="pontos-section">
            <div class="ponto-card">
                <h3>Vantagens</h3>
                <div class="ponto-valor" id="total-vantagens">+0 pts</div>
            </div>
            <div class="ponto-card gastos">
                <h3>Desvantagens</h3>
                <div class="ponto-valor" id="total-desvantagens">0 pts</div>
            </div>
            <div class="ponto-card saldo">
                <h3>Saldo Total</h3>
                <div class="ponto-valor" id="saldo-total-vantagens">0 pts</div>
            </div>
        </div>

        <!-- SE√á√ÉO VANTAGENS E DESVANTAGENS -->
        <div class="cards-grid principais-grid">
            <!-- CARD VANTAGENS DISPON√çVEIS -->
            <div class="atributo-card">
                <div class="atributo-header">
                    <h3>‚≠ê Vantagens Dispon√≠veis</h3>
                    <div class="contador" id="contador-vantagens">0 vantagens</div>
                </div>
                
                <!-- SISTEMA DE BUSCA -->
                <div class="busca-simples">
                    <input type="text" id="busca-vantagens" placeholder="üîç Buscar vantagem..." 
                           class="busca-input" autocomplete="off">
                </div>
                
                <!-- LISTA DE VANTAGENS -->
                <div class="lista-container" id="lista-vantagens">
                    <!-- Conte√∫do ser√° preenchido por JavaScript -->
                    <div class="lista-vazia">Carregando vantagens...</div>
                </div>
            </div>

            <!-- CARD VANTAGENS ADQUIRIDAS -->
            <div class="atributo-card">
                <div class="atributo-header">
                    <h3>‚úÖ Vantagens Adquiridas</h3>
                    <div class="custo-pontos" id="total-vantagens-adquiridas">0 pts</div>
                </div>
                
                <div class="lista-container" id="vantagens-adquiridas">
                    <div class="lista-vazia">Nenhuma vantagem adquirida</div>
                </div>
            </div>
        </div>

        <!-- SEPARADOR -->
        <div class="secao-titulo">
            <h2>Desvantagens</h2>
        </div>

        <!-- SE√á√ÉO DESVANTAGENS -->
        <div class="cards-grid principais-grid">
            <!-- CARD DESVANTAGENS DISPON√çVEIS -->
            <div class="atributo-card">
                <div class="atributo-header">
                    <h3>‚ö†Ô∏è Desvantagens Dispon√≠veis</h3>
                    <div class="contador" id="contador-desvantagens">0 desvantagens</div>
                </div>
                
                <!-- SISTEMA DE BUSCA -->
                <div class="busca-simples">
                    <input type="text" id="busca-desvantagens" placeholder="üîç Buscar desvantagem..." 
                           class="busca-input" autocomplete="off">
                </div>
                
                <!-- LISTA DE DESVANTAGENS -->
                <div class="lista-container" id="lista-desvantagens">
                    <!-- Conte√∫do ser√° preenchido por JavaScript -->
                    <div class="lista-vazia">Carregando desvantagens...</div>
                </div>
            </div>

            <!-- CARD DESVANTAGENS ADQUIRIDAS -->
            <div class="atributo-card">
                <div class="atributo-header">
                    <h3>‚ùå Desvantagens Adquiridas</h3>
                    <div class="custo-pontos negativo" id="total-desvantagens-adquiridas">0 pts</div>
                </div>
                
                <div class="lista-container" id="desvantagens-adquiridas">
                    <div class="lista-vazia">Nenhuma desvantagem adquirida</div>
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO PECULIARIDADES -->
        <div class="secao-titulo">
            <h2>Peculiaridades</h2>
            <small class="subtitulo">M√°ximo 5 peculiaridades ‚Ä¢ -1 ponto cada</small>
        </div>

        <div class="atributo-card">
            <div class="atributo-header">
                <h3>üî§ Peculiaridades do Personagem</h3>
                <div class="contador" id="contador-peculiaridades">0/5</div>
            </div>
            
            <div class="peculiaridades-container">
                <!-- √ÅREA PARA ADICIONAR NOVAS PECULIARIDADES -->
                <div class="adicionar-peculiaridade">
                    <input type="text" id="nova-peculiaridade" 
                           placeholder="Digite uma peculiaridade (ex: Medo de altura, Tique nervoso...)" 
                           maxlength="100" class="peculiaridade-input">
                    <button id="btn-adicionar-peculiaridade" class="btn btn-pequeno">
                        ‚ûï Adicionar
                    </button>
                </div>
                
                <!-- LISTA DE PECULIARIDADES -->
                <div class="lista-container" id="lista-peculiaridades">
                    <div class="lista-vazia">Nenhuma peculiaridade adicionada</div>
                </div>
                
                <!-- RESUMO -->
                <div class="peculiaridades-resumo">
                    <div class="resumo-item">
                        <span>Peculiaridades:</span>
                        <strong id="total-peculiaridades">0</strong>
                    </div>
                    <div class="resumo-item">
                        <span>Custo Total:</span>
                        <strong class="negativo" id="custo-peculiaridades">-0 pts</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- MODAL PARA VANTAGENS -->
<div id="modal-vantagem" class="modal">
    <div class="modal-content modal-vantagem">
        <span class="modal-close">&times;</span>
        <div class="modal-header">
            <h3 id="modal-titulo-vantagem">Selecionar Vantagem</h3>
        </div>
        <div class="modal-body" id="modal-corpo-vantagem">
            <!-- Conte√∫do ser√° preenchido dinamicamente -->
        </div>
        <div class="modal-actions">
            <button class="btn btn-cancelar">Cancelar</button>
            <button class="btn btn-confirmar" disabled>Adicionar Vantagem</button>
        </div>
    </div>
</div>

<!-- MODAL PARA DESVANTAGENS -->
<div id="modal-desvantagem" class="modal">
    <div class="modal-content modal-desvantagem">
        <span class="modal-close">&times;</span>
        <div class="modal-header">
            <h3 id="modal-titulo-desvantagem">Selecionar Desvantagem</h3>
        </div>
        <div class="modal-body" id="modal-corpo-desvantagem">
            <!-- Conte√∫do ser√° preenchido dinamicamente -->
        </div>
        <div class="modal-actions">
            <button class="btn btn-cancelar">Cancelar</button>
            <button class="btn btn-confirmar" disabled>Adicionar Desvantagem</button>
        </div>
    </div>
</div>

<!-- MODAL PARA OP√á√ïES (QUANDO TEM V√ÅRIAS VERS√ïES) -->
<div id="modal-opcoes" class="modal">
    <div class="modal-content modal-opcoes">
        <span class="modal-close">&times;</span>
        <div class="modal-header">
            <h3 id="modal-titulo-opcoes">Escolha uma Op√ß√£o</h3>
        </div>
        <div class="modal-body" id="modal-corpo-opcoes">
            <!-- Lista de op√ß√µes (ex: Aben√ßoado 10pts, 20pts, etc) -->
        </div>
        <div class="modal-actions">
            <button class="btn btn-cancelar">Voltar</button>
            <button class="btn btn-confirmar" disabled>Selecionar</button>
        </div>
    </div>
</div>

<!-- ABA PER√çCIAS -->
<div id="pericias" class="tab-content">
  <div class="container-principal">
    <!-- STATUS PER√çCIAS - VERS√ÉO POR ATRIBUTO -->
    <div class="status-cards-container">
      <div class="card-status-resumo">
        <h3><i class="fas fa-chart-pie"></i> Resumo das Per√≠cias</h3>
        <div class="status-linhas-container">
          <!-- DX -->
          <div class="status-linha">
            <div class="status-categoria">
              <i class="fas fa-running"></i>
              <span>DX</span>
            </div>
            <div class="status-valores">
              <span class="status-qtd" id="qtd-dx">0</span>
              <span class="status-pontos" id="pts-dx">(0 pts)</span>
            </div>
          </div>
          <!-- IQ -->
          <div class="status-linha">
            <div class="status-categoria">
              <i class="fas fa-brain"></i>
              <span>IQ</span>
            </div>
            <div class="status-valores">
              <span class="status-qtd" id="qtd-iq">0</span>
              <span class="status-pontos" id="pts-iq">(0 pts)</span>
            </div>
          </div>
          <!-- HT -->
          <div class="status-linha">
            <div class="status-categoria">
              <i class="fas fa-heartbeat"></i>
              <span>HT</span>
            </div>
            <div class="status-valores">
              <span class="status-qtd" id="qtd-ht">0</span>
              <span class="status-pontos" id="pts-ht">(0 pts)</span>
            </div>
          </div>
          <!-- PERC -->
          <div class="status-linha">
            <div class="status-categoria">
              <i class="fas fa-eye"></i>
              <span>PERC</span>
            </div>
            <div class="status-valores">
              <span class="status-qtd" id="qtd-perc">0</span>
              <span class="status-pontos" id="pts-perc">(0 pts)</span>
            </div>
          </div>
          <!-- SEPARADOR -->
          <div class="status-separador"></div>
          <!-- TOTAL -->
          <div class="status-linha total">
            <div class="status-categoria">
              <i class="fas fa-box"></i>
              <span>TOTAL</span>
            </div>
            <div class="status-valores">
              <span class="status-qtd" id="qtd-total">0</span>
              <span class="status-pontos" id="pts-total">(0 pts)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SISTEMA DE AQUISI√á√ÉO - LADO A LADO -->
    <div class="sistema-aquisicao-pericias">
      <!-- COLUNA ESQUERDA - CAT√ÅLOGO DE PER√çCIAS -->
      <div class="catalog-column-pericias">
        <div class="catalog-section-pericias">
          <h3><i class="fas fa-book-open"></i> Cat√°logo de Per√≠cias</h3>
          <!-- BARRA DE BUSCA -->
          <div class="busca-pericias">
            <input type="text" placeholder="üîç Buscar per√≠cias..." class="search-input" id="busca-pericias">
          </div>
          <!-- FILTROS POR ATRIBUTO E COMBATE -->
          <div class="filtros-container-pericias">
            <div class="filtro-buttons">
              <button class="filtro-btn active" data-filtro="todas">
                <i class="fas fa-layer-group"></i> Todas
              </button>
              <button class="filtro-btn" data-filtro="dx">
                <i class="fas fa-running"></i> DX
              </button>
              <button class="filtro-btn" data-filtro="iq">
                <i class="fas fa-brain"></i> IQ
              </button>
              <button class="filtro-btn" data-filtro="ht">
                <i class="fas fa-heartbeat"></i> HT
              </button>
              <button class="filtro-btn" data-filtro="perc">
                <i class="fas fa-eye"></i> PERC
              </button>
              <button class="filtro-btn" data-filtro="combate">
                <i class="fas fa-fist-raised"></i> Combate
              </button>
            </div>
          </div>
          <!-- LISTA DE PER√çCIAS DO CAT√ÅLOGO -->
          <div class="catalog-list-pericias" id="lista-pericias">
            <!-- Carregado dinamicamente -->
          </div>
        </div>
      </div>

      <!-- COLUNA DIREITA - PER√çCIAS APRENDIDAS + DETALHES -->
      <div class="acquired-column-pericias">
        <!-- SE√á√ÉO DE PER√çCIAS APRENDIDAS -->
        <div class="acquired-section-pericias">
          <h3><i class="fas fa-graduation-cap"></i> Per√≠cias Aprendidas 
            <span class="points-badge" id="pontos-pericias-total">[0 pts]</span>
          </h3>
          <div class="acquired-list-pericias" id="pericias-aprendidas">
            <!-- Carregado dinamicamente -->
          </div>
        </div>
        <!-- SE√á√ÉO DE DETALHES DA PER√çCIA SELECIONADA -->
        <div class="detalhes-pericia-section">
          <div class="detalhes-pericia-content" id="detalhes-pericia-content">
            <div class="nenhuma-pericia-selecionada">
              <i class="fas fa-search"></i>
              <div>Selecione uma per√≠cia para ver os detalhes</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SE√á√ÉO DE T√âCNICAS ===== -->
    <div class="tecnicas-section" style="margin-top: 40px; border-top: 2px solid rgba(255, 140, 0, 0.3); padding-top: 30px;">
      <!-- STATUS DAS T√âCNICAS -->
      <div class="status-cards-container">
        <div class="card-status-resumo">
          <h3><i class="fas fa-tools"></i> T√©cnicas Especiais</h3>
          <div class="status-linhas-container">
            <!-- T√âCNICAS M√âDIAS -->
            <div class="status-linha">
              <div class="status-categoria">
                <i class="fas fa-star-half-alt"></i>
                <span>M√©dias</span>
              </div>
              <div class="status-valores">
                <span class="status-qtd" id="qtd-tecnicas-medio">0</span>
                <span class="status-pontos" id="pts-tecnicas-medio">(0 pts)</span>
              </div>
            </div>
            <!-- T√âCNICAS DIF√çCEIS -->
            <div class="status-linha">
              <div class="status-categoria">
                <i class="fas fa-star"></i>
                <span>Dif√≠ceis</span>
              </div>
              <div class="status-valores">
                <span class="status-qtd" id="qtd-tecnicas-dificil">0</span>
                <span class="status-pontos" id="pts-tecnicas-dificil">(0 pts)</span>
              </div>
            </div>
            <!-- SEPARADOR -->
            <div class="status-separador"></div>
            <!-- TOTAL T√âCNICAS -->
            <div class="status-linha total">
              <div class="status-categoria">
                <i class="fas fa-tools"></i>
                <span>TOTAL T√âCNICAS</span>
              </div>
              <div class="status-valores">
                <span class="status-qtd" id="qtd-tecnicas-total">0</span>
                <span class="status-pontos" id="pts-tecnicas-total">(0 pts)</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- SISTEMA DE AQUISI√á√ÉO DE T√âCNICAS -->
      <div class="sistema-aquisicao-pericias" style="margin-top: 25px;">
        <!-- COLUNA ESQUERDA - CAT√ÅLOGO DE T√âCNICAS -->
        <div class="catalog-column-pericias">
          <div class="catalog-section-pericias">
            <h3><i class="fas fa-book-open"></i> T√©cnicas Dispon√≠veis</h3>
            <!-- BARRA DE BUSCA -->
            <div class="busca-pericias">
              <input type="text" placeholder="üîç Buscar t√©cnicas..." class="search-input" id="busca-tecnicas">
            </div>
            <!-- FILTROS POR DIFICULDADE -->
            <div class="filtros-container-pericias">
              <div class="filtro-buttons">
                <button class="filtro-btn active" data-filtro="todas-tecnicas">
                  <i class="fas fa-layer-group"></i> Todas
                </button>
                <button class="filtro-btn" data-filtro="medio-tecnicas">
                  <i class="fas fa-star-half-alt"></i> M√©dias
                </button>
                <button class="filtro-btn" data-filtro="dificil-tecnicas">
                  <i class="fas fa-star"></i> Dif√≠ceis
                </button>
              </div>
            </div>
            <!-- LISTA DE T√âCNICAS DISPON√çVEIS -->
            <div class="catalog-list-pericias" id="lista-tecnicas">
              <!-- Carregado dinamicamente -->
            </div>
          </div>
        </div>

        <!-- COLUNA DIREITA - T√âCNICAS APRENDIDAS + DETALHES -->
        <div class="acquired-column-pericias">
          <!-- T√âCNICAS APRENDIDAS -->
          <div class="acquired-section-pericias">
            <h3><i class="fas fa-graduation-cap"></i> T√©cnicas Aprendidas 
              <span class="points-badge" id="pontos-tecnicas-total">[0 pts]</span>
            </h3>
            <div class="acquired-list-pericias" id="tecnicas-aprendidas">
              <!-- Carregado dinamicamente -->
            </div>
          </div>
          <!-- DETALHES DA T√âCNICA SELECIONADA -->
          <div class="detalhes-pericia-section">
            <div class="detalhes-pericia-content" id="detalhes-tecnica-content">
              <div class="nenhuma-pericia-selecionada">
                <i class="fas fa-search"></i>
                <div>Selecione uma t√©cnica para ver os detalhes</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAIS -->
    <!-- MODAL DE COMPRA/EDI√á√ÉO DE PER√çCIA -->
    <div class="modal-pericia-overlay" style="display: none;">
      <div class="modal-pericia">
        <!-- Conte√∫do preenchido dinamicamente -->
      </div>
    </div>

    <!-- MODAL DE ESCOLHA DE ESPECIALIZA√á√ÉO -->
    <div class="modal-especializacao-overlay" style="display: none;">
      <div class="modal-especializacao">
        <!-- Conte√∫do preenchido dinamicamente -->
      </div>
    </div>

    <!-- MODAL DE COMPRA/EDI√á√ÉO DE T√âCNICA -->
    <div class="modal-tecnica-overlay" style="display: none;">
      <div class="modal-tecnica">
        <!-- Conte√∫do preenchido dinamicamente -->
      </div>
    </div>
  </div>
</div>
      <!-- ABA MAGIA -->
<div id="magia" class="tab-content">
  <div class="container-principal">
    
    <!-- STATUS M√ÅGICO -->
    <div class="status-cards-container">
      <div class="card-magia-status">
        <h3><i class="fas fa-hat-wizard"></i> Status M√°gico</h3>
        <div class="magia-status-grid">
          <div class="magia-status-item">
            <label><i class="fas fa-wand-magic"></i> Aptid√£o M√°gica:</label>
            <input type="number" id="aptidao-magica" value="0" min="0" max="10">
          </div>
          <div class="magia-status-item">
            <label><i class="fas fa-brain"></i> IQ M√°gico:</label>
            <span id="iq-magico">10</span>
          </div>
          <div class="magia-status-item">
            <label><i class="fas fa-tint"></i> Mana Base:</label>
            <span id="mana-base">10</span>
          </div>
          <div class="magia-status-item">
            <label><i class="fas fa-battery-half"></i> Mana Atual:</label>
            <input type="number" id="mana-atual" value="10" min="0" max="50">
          </div>
          <div class="magia-status-item">
            <label><i class="fas fa-plus-circle"></i> B√¥nus de Mana:</label>
            <input type="number" id="bonus-mana" value="0" min="0" max="20">
          </div>
          <div class="magia-status-item total">
            <label><i class="fas fa-coins"></i> Total Gasto:</label>
            <span id="total-gasto-magia">0</span> pts
          </div>
        </div>
      </div>
    </div>

    <!-- SISTEMA DE AQUISI√á√ÉO - LADO A LADO -->
    <div class="sistema-aquisicao-magia">
      
      <!-- COLUNA ESQUERDA - CAT√ÅLOGO -->
      <div class="catalog-column-magia">
        <div class="catalog-section-magia">
          <h3><i class="fas fa-book"></i> Cat√°logo de Magias</h3>
          
          <!-- BARRA DE BUSCA -->
          <div class="busca-magias">
            <input type="text" placeholder="üîç Buscar magias..." class="search-input" id="busca-magias">
          </div>
          
          <!-- FILTROS COM SUBMENUS (como nas per√≠cias) -->
          <div class="filtros-container-magia">
            
            <!-- FILTRO ESCOLAS -->
            <div class="filtro-grupo">
              <div class="filtro-header" onclick="toggleSubmenu('escolas-submenu')">
                <i class="fas fa-graduation-cap"></i>
                <span>Escolas de Magia</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="filtro-submenu" id="escolas-submenu">
                <div class="filtro-option">
                  <input type="checkbox" id="escola-todas" checked>
                  <label for="escola-todas">Todas as Escolas</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-agua" class="escola-checkbox" checked>
                  <label for="escola-agua">√Ågua</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-ar" class="escola-checkbox" checked>
                  <label for="escola-ar">Ar</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-compreensao" class="escola-checkbox" checked>
                  <label for="escola-compreensao">Compreens√£o e Empatia</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-controle-mente" class="escola-checkbox" checked>
                  <label for="escola-controle-mente">Controle da Mente</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-controle-corpo" class="escola-checkbox" checked>
                  <label for="escola-controle-corpo">Controle do Corpo</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-cura" class="escola-checkbox" checked>
                  <label for="escola-cura">Cura</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-deslocamento" class="escola-checkbox" checked>
                  <label for="escola-deslocamento">Deslocamento</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-fogo" class="escola-checkbox" checked>
                  <label for="escola-fogo">Fogo</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-luz-trevas" class="escola-checkbox" checked>
                  <label for="escola-luz-trevas">Luz e Trevas</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-necromancia" class="escola-checkbox" checked>
                  <label for="escola-necromancia">Necromancia</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-portal" class="escola-checkbox" checked>
                  <label for="escola-portal">Portal</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-protecao" class="escola-checkbox" checked>
                  <label for="escola-protecao">Prote√ß√£o e Aviso</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-reconhecimento" class="escola-checkbox" checked>
                  <label for="escola-reconhecimento">Reconhecimento</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-terra" class="escola-checkbox" checked>
                  <label for="escola-terra">Terra</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="escola-metamagica" class="escola-checkbox" checked>
                  <label for="escola-metamagica">Metam√°gica</label>
                </div>
              </div>
            </div>

            <!-- FILTRO CLASSES -->
            <div class="filtro-grupo">
              <div class="filtro-header" onclick="toggleSubmenu('classes-submenu')">
                <i class="fas fa-layer-group"></i>
                <span>Classes de Magia</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="filtro-submenu" id="classes-submenu">
                <div class="filtro-option">
                  <input type="checkbox" id="classe-todas" checked>
                  <label for="classe-todas">Todas as Classes</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-comuns" class="classe-checkbox" checked>
                  <label for="classe-comuns">Comuns</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-area" class="classe-checkbox" checked>
                  <label for="classe-area">√Årea</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-toque" class="classe-checkbox" checked>
                  <label for="classe-toque">Toque</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-projetil" class="classe-checkbox" checked>
                  <label for="classe-projetil">Proj√©til</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-bloqueio" class="classe-checkbox" checked>
                  <label for="classe-bloqueio">Bloqueio</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-informacao" class="classe-checkbox" checked>
                  <label for="classe-informacao">Informa√ß√£o</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-resistiveis" class="classe-checkbox" checked>
                  <label for="classe-resistiveis">Resist√≠veis</label>
                </div>
                <div class="filtro-option">
                  <input type="checkbox" id="classe-especiais" class="classe-checkbox" checked>
                  <label for="classe-especiais">Especiais</label>
                </div>
              </div>
            </div>
          </div>
          
          <!-- LISTA DE MAGIAS DO CAT√ÅLOGO -->
          <div class="catalog-list-magias" id="lista-magias">
            <!-- As magias ser√£o carregadas dinamicamente pelo JavaScript -->
            <div class="nenhuma-magia">
              <i class="fas fa-spinner fa-spin"></i>
              <div>Carregando cat√°logo de magias...</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- COLUNA DIREITA - MAGIAS APRENDIDAS -->
      <div class="acquired-column-magia">
        
        <!-- MAGIAS APRENDIDAS -->
        <div class="acquired-section-magia">
          <h3><i class="fas fa-graduation-cap"></i> Magias Aprendidas 
            <span class="points-badge" id="pontos-magia-total">[0 pts]</span>
          </h3>
          <div class="acquired-list-magias" id="magias-aprendidas">
            <div class="nenhuma-magia-aprendida">
              <i class="fas fa-hat-wizard"></i>
              <div>Nenhuma magia aprendida</div>
              <small>As magias que voc√™ aprender aparecer√£o aqui</small>
            </div>
          </div>
        </div>

        <!-- DETALHES DA MAGIA SELECIONADA -->
        <div class="detalhes-magia-section">
          <div class="detalhes-magia-content" id="detalhes-magia-content">
            <div class="nenhuma-magia-selecionada">
              <i class="fas fa-search"></i>
              <div>Selecione uma magia para ver os detalhes</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- MODAL DE COMPRA/EDI√á√ÉO -->
    <div class="modal-compra-overlay" style="display: none;">
      <div class="modal-compra">
        <!-- Conte√∫do ser√° preenchido pelo JavaScript -->
      </div>
    </div>

  </div>
</div>
   


<script>
function toggleSubmenu(id) {
    const submenu = document.getElementById(id);
    const icon = submenu.previousElementSibling.querySelector('.fa-chevron-down');
    
    submenu.classList.toggle('active');
    
    if (submenu.classList.contains('active')) {
        icon.className = 'fas fa-chevron-up';
    } else {
        icon.className = 'fas fa-chevron-down';
    }
}
</script>
<!-- ABA EQUIPAMENTO -->
<div id="equipamento" class="tab-content">
    <div class="equipamento-container">
        
        <!-- BANNER SUPERIOR COM STATUS -->
        <div class="equipamento-banner">
            <div class="banner-grid">
                <!-- DINHEIRO -->
                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-coins"></i>
                        <h4>Dinheiro</h4>
                    </div>
                    <div class="status-value" id="dinheiroEquipamento">$2.000</div>
                    <div class="status-actions">
                        <button class="btn-status" onclick="window.receberDinheiroRapido && receberDinheiroRapido()">
                            <i class="fas fa-plus"></i> Receber
                        </button>
                        <button class="btn-status" onclick="window.gastarDinheiroRapido && gastarDinheiroRapido()">
                            <i class="fas fa-minus"></i> Gastar
                        </button>
                    </div>
                </div>
                
                <!-- CARGA -->
                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-weight-hanging"></i>
                        <h4>Carga</h4>
                    </div>
                    <div class="status-value">
                        <span id="pesoAtual">0</span>/<span id="pesoMaximo">60</span> kg
                    </div>
                    <div class="status-info">
                        <span id="nivelCarga" class="carga-leve">LEVE</span>
                        <small id="penalidadesCarga">MOV +0 / DODGE +0</small>
                    </div>
                </div>
                
                <!-- M√ÉOS -->
                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-hands"></i>
                        <h4>M√£os Livres</h4>
                    </div>
                    <div class="status-value" id="displayMaos">
                        <span class="mao-livre">üëê</span><span class="mao-livre">üëê</span>
                    </div>
                    <div class="status-info">
                        <small>2 m√£os dispon√≠veis</small>
                    </div>
                </div>
                
                <!-- MOCHILA -->
                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-backpack"></i>
                        <h4>Mochila</h4>
                    </div>
                    <div class="status-value">
                        <span id="contadorMochila">0</span> itens
                    </div>
                    <div class="status-actions">
                        <button class="btn-status" id="btn-liberar-mochila">
                            <i class="fas fa-suitcase"></i> Liberar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SUB-ABAS DE EQUIPAMENTO -->
        <div class="equipamento-subtabs">
            <div class="subtabs-container">
                <button class="subtab-btn active" data-subtab="catalogo">
                    <i class="fas fa-store"></i>
                    <span>Cat√°logo</span>
                </button>
                <button class="subtab-btn" data-subtab="inventario">
                    <i class="fas fa-box-open"></i>
                    <span>Invent√°rio</span>
                </button>
                <button class="subtab-btn" data-subtab="deposito">
                    <i class="fas fa-home"></i>
                    <span>Dep√≥sito</span>
                </button>
                <button class="subtab-btn" data-subtab="criar">
                    <i class="fas fa-plus-circle"></i>
                    <span>Criar Item</span>
                </button>
                <button class="subtab-btn" data-subtab="financeiro">
                    <i class="fas fa-chart-line"></i>
                    <span>Financeiro</span>
                </button>
            </div>
        </div>
        
        <!-- CONTE√öDO DAS SUB-ABAS -->
        <div class="equipamento-subcontent">
            
            <!-- SUB-ABA: CAT√ÅLOGO -->
            <div id="subtab-catalogo" class="subtab-content active">
                <div class="catalogo-container">
                    
                    <!-- FILTROS DO CAT√ÅLOGO -->
                    <div class="catalogo-filtros">
                        <div class="filtro-header">
                            <i class="fas fa-filter"></i>
                            <h4>Filtros</h4>
                        </div>
                        
                        <div class="filtros-grid">
                            <!-- ERA -->
                            <div class="filtro-group">
                                <label>Era:</label>
                                <select id="filtro-era" class="filtro-select">
                                    <option value="todas">Todas as Eras</option>
                                    <option value="medieval">Medieval/Fantasia</option>
                                    <option value="moderna">Moderna/Cyberpunk</option>
                                </select>
                            </div>
                            
                            <!-- TIPO DE EQUIPAMENTO -->
                            <div class="filtro-group">
                                <label>Tipo:</label>
                                <select id="filtro-tipo" class="filtro-select">
                                    <option value="todas">Todos os Tipos</option>
                                    <option value="arma-cc">Armas Corpo-a-Corpo</option>
                                    <option value="arma-dist">Armas √† Dist√¢ncia</option>
                                    <option value="armadura">Armaduras</option>
                                    <option value="escudo">Escudos</option>
                                    <option value="geral">Equipamentos Gerais</option>
                                </select>
                            </div>
                            
                            <!-- BUSCA -->
                            <div class="filtro-group busca-group">
                                <label>Buscar:</label>
                                <div class="busca-input">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="busca-catalogo" placeholder="Nome do equipamento...">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- LISTA DE CATEGORIAS -->
                    <div class="categorias-container">
                        
                        <!-- ARMAS CORPO-A-CORPO -->
                        <div class="categoria-section" data-category="armas-cc">
                            <div class="categoria-header">
                                <i class="fas fa-gavel"></i>
                                <h3>Armas Corpo-a-Corpo</h3>
                                <span class="categoria-count" id="count-armas-cc">6</span>
                            </div>
                            <div class="table-container">
                                <!-- Tabela ser√° preenchida pelo JavaScript -->
                                <div class="loading-categoria">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Carregando armas...</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ARMAS √Ä DIST√ÇNCIA -->
                        <div class="categoria-section" data-category="armas-dist">
                            <div class="categoria-header">
                                <i class="fas fa-bullseye"></i>
                                <h3>Armas √† Dist√¢ncia</h3>
                                <span class="categoria-count" id="count-armas-dist">4</span>
                            </div>
                            <div class="table-container">
                                <!-- Tabela ser√° preenchida pelo JavaScript -->
                            </div>
                        </div>
                        
                        <!-- ARMADURAS -->
                        <div class="categoria-section" data-category="armaduras">
                            <div class="categoria-header">
                                <i class="fas fa-shield-alt"></i>
                                <h3>Armaduras</h3>
                                <span class="categoria-count" id="count-armaduras">4</span>
                            </div>
                            <div class="table-container">
                                <!-- Tabela ser√° preenchida pelo JavaScript -->
                            </div>
                        </div>
                        
                        <!-- ESCUDOS -->
                        <div class="categoria-section" data-category="escudos">
                            <div class="categoria-header">
                                <i class="fas fa-shield-virus"></i>
                                <h3>Escudos</h3>
                                <span class="categoria-count" id="count-escudos">4</span>
                            </div>
                            <div class="table-container">
                                <!-- Tabela ser√° preenchida pelo JavaScript -->
                            </div>
                        </div>
                        
                        <!-- EQUIPAMENTOS GERAIS -->
                        <div class="categoria-section" data-category="geral">
                            <div class="categoria-header">
                                <i class="fas fa-campground"></i>
                                <h3>Equipamentos Gerais</h3>
                                <span class="categoria-count" id="count-geral">7</span>
                            </div>
                            <div class="table-container">
                                <!-- Tabela ser√° preenchida pelo JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SUB-ABA: INVENT√ÅRIO -->
            <div id="subtab-inventario" class="subtab-content">
                <div class="inventario-container">
                    
                    <!-- FILTROS DO INVENT√ÅRIO -->
                    <div class="inventario-filtros">
                        <div class="filtros-rapidos">
                            <button class="filtro-btn active" data-filtro="todos">
                                <i class="fas fa-list"></i> Todos
                            </button>
                            <button class="filtro-btn" data-filtro="equipados">
                                <i class="fas fa-tshirt"></i> Equipados
                            </button>
                            <button class="filtro-btn" data-filtro="corpo">
                                <i class="fas fa-user"></i> No Corpo
                            </button>
                            <button class="filtro-btn" data-filtro="mochila">
                                <i class="fas fa-backpack"></i> Mochila
                            </button>
                        </div>
                        
                        <div class="inventario-info">
                            <span><strong id="totalItensInventario">0</strong> itens no total</span>
                            <span><strong id="pesoInventario">0</strong> kg de peso</span>
                        </div>
                    </div>
                    
                    <!-- LISTA DE EQUIPAMENTOS ADQUIRIDOS -->
                    <div class="lista-inventario" id="lista-equipamentos-adquiridos">
                        <div class="inventario-vazio">
                            <i class="fas fa-inbox fa-3x"></i>
                            <h4>Invent√°rio Vazio</h4>
                            <p>Adquira equipamentos no cat√°logo para come√ßar</p>
                            <button class="btn-ir-catalogo" onclick="window.alternarSubTab && alternarSubTab('catalogo')">
                                <i class="fas fa-store"></i> Ir para Cat√°logo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SUB-ABA: DEP√ìSITO -->
            <div id="subtab-deposito" class="subtab-content">
                <div class="deposito-container">
                    
                    <!-- CABE√áALHO DO DEP√ìSITO -->
                    <div class="deposito-header">
                        <div class="deposito-info">
                            <h3><i class="fas fa-home"></i> Dep√≥sito</h3>
                            <p>Itens guardados n√£o contam peso e n√£o podem ser usados</p>
                        </div>
                        
                        <div class="deposito-acoes">
                            <button class="btn-deposito-acao" id="btn-guardar-tudo-deposito">
                                <i class="fas fa-upload"></i> Guardar Tudo
                            </button>
                            <button class="btn-deposito-acao" id="btn-retirar-tudo-deposito">
                                <i class="fas fa-download"></i> Retirar Tudo
                            </button>
                            <button class="btn-deposito-acao perigo" id="btn-limpar-deposito">
                                <i class="fas fa-trash"></i> Limpar Dep√≥sito
                            </button>
                        </div>
                    </div>
                    
                    <!-- RESUMO DO DEP√ìSITO -->
                    <div class="deposito-resumo">
                        <div class="resumo-card">
                            <i class="fas fa-boxes"></i>
                            <div>
                                <h4>Itens Guardados</h4>
                                <span id="contador-deposito">0 itens</span>
                            </div>
                        </div>
                        
                        <div class="resumo-card">
                            <i class="fas fa-weight-hanging"></i>
                            <div>
                                <h4>Peso Liberado</h4>
                                <span id="peso-liberado">0 kg</span>
                            </div>
                        </div>
                        
                        <div class="resumo-card">
                            <i class="fas fa-coins"></i>
                            <div>
                                <h4>Valor Total</h4>
                                <span id="valor-deposito">$0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- LISTA DO DEP√ìSITO -->
                    <div class="lista-deposito" id="lista-deposito">
                        <div class="deposito-vazio">
                            <i class="fas fa-home fa-3x"></i>
                            <h4>Dep√≥sito Vazio</h4>
                            <p>Guarde itens do seu invent√°rio aqui</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SUB-ABA: CRIAR ITEM -->
            <div id="subtab-criar" class="subtab-content">
                <div class="criar-container">
                    <div class="criar-header">
                        <h3><i class="fas fa-plus-circle"></i> Criar Item Personalizado</h3>
                        <p>Crie equipamentos, armas, armaduras e itens m√°gicos personalizados</p>
                    </div>
                    
                    <div class="criar-grid">
                        <!-- FORMUL√ÅRIO DE CRIA√á√ÉO -->
                        <div class="criar-form">
                            <div class="form-section">
                                <h4><i class="fas fa-info-circle"></i> Informa√ß√µes B√°sicas</h4>
                                
                                <div class="form-group">
                                    <label>Nome do Item:</label>
                                    <input type="text" id="item-nome" placeholder="Ex: Espada √âlfica" maxlength="50">
                                </div>
                                
                                <div class="form-group">
                                    <label>Tipo de Item:</label>
                                    <select id="item-tipo">
                                        <option value="geral">Equipamento Geral</option>
                                        <option value="arma-cc">Arma Corpo-a-Corpo</option>
                                        <option value="arma-dist">Arma √† Dist√¢ncia</option>
                                        <option value="armadura">Armadura</option>
                                        <option value="escudo">Escudo</option>
                                        <option value="consumivel">Consum√≠vel</option>
                                        <option value="artefato">Artefato M√°gico</option>
                                        <option value="missao">Item de Miss√£o</option>
                                    </select>
                                </div>
                                
                                <div class="form-group-duo">
                                    <div class="form-group">
                                        <label>Peso (kg):</label>
                                        <input type="number" id="item-peso" value="1.0" step="0.1" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Custo ($):</label>
                                        <input type="number" id="item-custo" value="0" min="0">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Era:</label>
                                    <select id="item-era">
                                        <option value="medieval">Medieval/Fantasia</option>
                                        <option value="moderna">Moderna/Cyberpunk</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Descri√ß√£o:</label>
                                    <textarea id="item-descricao" rows="3" placeholder="Descreva o item..."></textarea>
                                </div>
                                
                                <div class="form-group checkbox-group">
                                    <input type="checkbox" id="item-magico">
                                    <label>Item M√°gico?</label>
                                </div>
                                
                                <!-- CAMPOS M√ÅGICOS (OCULTOS INICIALMENTE) -->
                                <div id="campos-magicos" style="display: none;">
                                    <div class="form-group">
                                        <label>Efeito M√°gico:</label>
                                        <textarea id="item-efeito-magico" rows="2" placeholder="Descreva o efeito m√°gico..."></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- CAMPOS ESPEC√çFICOS POR TIPO -->
                            <div id="campos-especificos">
                                <!-- Ser√£o preenchidos dinamicamente -->
                            </div>
                            
                            <div class="form-actions">
                                <button class="btn-cancelar" onclick="window.limparFormCriacao && limparFormCriacao()">
                                    <i class="fas fa-times"></i> Limpar
                                </button>
                                <button class="btn-confirmar" onclick="window.criarItemPersonalizado && criarItemPersonalizado()">
                                    <i class="fas fa-check"></i> Criar Item
                                </button>
                            </div>
                        </div>
                        
                        <!-- PREVIEW DO ITEM -->
                        <div class="criar-preview">
                            <div class="preview-header">
                                <h4><i class="fas fa-eye"></i> Preview do Item</h4>
                            </div>
                            <div class="preview-content" id="preview-conteudo">
                                <div class="preview-vazio">
                                    <i class="fas fa-cube fa-3x"></i>
                                    <p>As informa√ß√µes do item aparecer√£o aqui</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SUB-ABA: FINANCEIRO (SUPER SIMPLIFICADO) -->
            <div id="subtab-financeiro" class="subtab-content">
                <div class="financeiro-ultra-simples">
                    
                    <!-- CABE√áALHO M√çNIMO -->
                    <div class="financeiro-titulo">
                        <h3><i class="fas fa-coins"></i> Dinheiro</h3>
                        <p>Controle r√°pido de ouro/moedas</p>
                    </div>
                    
                    <!-- SALDO GRANDE E VIS√çVEL -->
                    <div class="saldo-principal">
                        <div class="saldo-atual">
                            <span>Saldo Dispon√≠vel:</span>
                            <h2 id="dinheiro-disponivel">$0</h2>
                        </div>
                        
                        <!-- BOT√ïES GRANDES E CLAROS -->
                        <div class="botoes-rapidos">
                            <button class="btn-receber-grande" onclick="window.receberDinheiroRapido && receberDinheiroRapido()">
                                <i class="fas fa-plus-circle"></i> RECEBER
                            </button>
                            <button class="btn-gastar-grande" onclick="window.gastarDinheiroRapido && gastarDinheiroRapido()">
                                <i class="fas fa-minus-circle"></i> GASTAR
                            </button>
                            <button class="btn-ajustar" onclick="window.ajustarDinheiroManual && ajustarDinheiroManual()">
                                <i class="fas fa-edit"></i> AJUSTAR
                            </button>
                        </div>
                    </div>
                    
                    <!-- VALORES R√ÅPIDOS -->
                    <div class="valores-rapidos">
                        <h4>Valores R√°pidos:</h4>
                        <div class="botoes-valores">
                            <button onclick="window.adicionarDinheiro && adicionarDinheiro(10)">+$10</button>
                            <button onclick="window.adicionarDinheiro && adicionarDinheiro(50)">+$50</button>
                            <button onclick="window.adicionarDinheiro && adicionarDinheiro(100)">+$100</button>
                            <button onclick="window.removerDinheiro && removerDinheiro(10)">-$10</button>
                            <button onclick="window.removerDinheiro && removerDinheiro(50)">-$50</button>
                            <button onclick="window.removerDinheiro && removerDinheiro(100)">-$100</button>
                        </div>
                    </div>
                    
                </div>
            </div>
            
        </div><!-- FIM DO equipamento-subcontent -->
        
        <!-- MODAIS GLOBAIS (FORA DAS SUB-ABAS) -->
        
        <!-- MODAL SIMPLIFICADO PARA DINHEIRO -->
        <div id="modal-dinheiro-simples" class="modal-overlay" style="display: none;">
            <div class="modal-simples">
                <div class="modal-header">
                    <h3 id="modal-titulo">Receber Dinheiro</h3>
                    <button onclick="window.fecharModalSimples && fecharModalSimples()">&times;</button>
                </div>
                
                <div class="modal-body">
                    <div class="saldo-atual-modal">
                        Saldo Atual: <strong id="saldo-modal-atual">$0</strong>
                    </div>
                    
                    <div class="campo-valor">
                        <label>Valor:</label>
                        <div class="input-com-simbolo">
                            <span>$</span>
                            <input type="number" id="valor-operacao" placeholder="0" min="1" step="1" autofocus>
                        </div>
                    </div>
                    
                    <div class="campo-descricao">
                        <label>Motivo:</label>
                        <input type="text" id="descricao-operacao" 
                               placeholder="Ex: Miss√£o, Recompensa, Compras...">
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn-cancelar" onclick="window.fecharModalSimples && fecharModalSimples()">
                        Cancelar
                    </button>
                    <button class="btn-confirmar" onclick="window.confirmarOperacao && confirmarOperacao()">
                        Confirmar
                    </button>
                </div>
            </div>
        </div>
        
        <!-- MODAL DE QUANTIDADE PARA COMPRAS -->
        <div id="submenu-quantidade" class="modal-overlay" style="display: none;">
            <div class="modal-simples">
                <div class="modal-header">
                    <h3 id="quantidade-titulo">Quantidade para Comprar</h3>
                    <button onclick="window.fecharSubmenuQuantidade && fecharSubmenuQuantidade()">&times;</button>
                </div>
                
                <div class="modal-body">
                    <div class="item-info-modal">
                        <h4 id="quantidade-nome-item">Item</h4>
                        <div class="detalhes-item-modal">
                            <span id="quantidade-custo-unitario">Custo: $0</span>
                            <span id="quantidade-peso-unitario">Peso: 0 kg</span>
                        </div>
                    </div>
                    
                    <div class="controles-quantidade-modal">
                        <button class="btn-quantidade-modal" onclick="window.diminuirQuantidade && diminuirQuantidade()">
                            <i class="fas fa-minus"></i>
                        </button>
                        
                        <input type="number" id="input-quantidade" 
                               value="1" min="1" max="99">
                        
                        <button class="btn-quantidade-modal" onclick="window.aumentarQuantidade && aumentarQuantidade()">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="totais-modal">
                        <div class="total-linha-modal">
                            <span>Custo Total:</span>
                            <strong id="quantidade-custo-total">$0</strong>
                        </div>
                        <div class="total-linha-modal">
                            <span>Peso Total:</span>
                            <strong id="quantidade-peso-total">0 kg</strong>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn-cancelar" onclick="window.fecharSubmenuQuantidade && fecharSubmenuQuantidade()">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="btn-confirmar" onclick="window.confirmarCompraQuantidade && confirmarCompraQuantidade()">
                        <i class="fas fa-check"></i> Comprar
                    </button>
                </div>
            </div>
        </div>
       
    </div><!-- FIM DO equipamento-container -->
</div><!-- FIM DA ABA EQUIPAMENTO -->
<script>
// Script de navega√ß√£o b√°sica para a aba equipamento
// Este script s√≥ cuida da navega√ß√£o entre sub-abas
// Todo o sistema de funcionalidades √© gerenciado pelo equipamentos.js

document.addEventListener('DOMContentLoaded', function() {
    // Configurar navega√ß√£o entre sub-abas (APENAS UI)
    configurarNavegacaoSubAbas();
    
    // Configurar bot√£o de mochila (event listener b√°sico)
    const btnLiberarMochila = document.getElementById('btn-liberar-mochila');
    if (btnLiberarMochila) {
        btnLiberarMochila.addEventListener('click', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.alternarMochila) {
                window.sistemaEquipamentos.alternarMochila();
            }
        });
    }
    
    // Configurar filtros do invent√°rio (event listener b√°sico)
    configurarFiltrosInventarioBasico();
    
    // Configurar bot√µes de dep√≥sito (event listener b√°sico)
    configurarBotoesDepositoBasico();
    
    // Configurar cria√ß√£o de itens (event listener b√°sico)
    configurarCriacaoItensBasico();
    
    // Configurar navega√ß√£o do cat√°logo (event listener b√°sico)
    configurarNavegacaoCatalogoBasico();
});

// Fun√ß√£o para configurar navega√ß√£o entre sub-abas (APENAS UI)
function configurarNavegacaoSubAbas() {
    document.querySelectorAll('.subtab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // Remover active de todos
            document.querySelectorAll('.subtab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.subtab-content').forEach(c => c.classList.remove('active'));
            
            // Adicionar active ao clicado
            this.classList.add('active');
            const subtabId = this.getAttribute('data-subtab');
            const subtabContent = document.getElementById(`subtab-${subtabId}`);
            
            if (subtabContent) {
                subtabContent.classList.add('active');
            }
        });
    });
}

// Configurar filtros do invent√°rio (APENAS UI)
function configurarFiltrosInventarioBasico() {
    document.querySelectorAll('.filtro-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            
            document.querySelectorAll('.filtro-btn').forEach(b => b.classList.remove('active'));
            
            this.classList.add('active');
            const filtro = this.getAttribute('data-filtro');
            
            // Chamar fun√ß√£o do sistema se dispon√≠vel
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.filtrarListaEquipamentos) {
                window.sistemaEquipamentos.filtrarListaEquipamentos(filtro);
            }
        });
    });
}

// Configurar bot√µes de dep√≥sito (APENAS event listeners)
function configurarBotoesDepositoBasico() {
    const btnGuardarTudo = document.getElementById('btn-guardar-tudo-deposito');
    const btnRetirarTudo = document.getElementById('btn-retirar-tudo-deposito');
    const btnLimpar = document.getElementById('btn-limpar-deposito');
    
    if (btnGuardarTudo) {
        btnGuardarTudo.addEventListener('click', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.moverTudoParaDeposito) {
                window.sistemaEquipamentos.moverTudoParaDeposito();
            }
        });
    }
    
    if (btnRetirarTudo) {
        btnRetirarTudo.addEventListener('click', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.retirarTudoDoDeposito) {
                window.sistemaEquipamentos.retirarTudoDoDeposito();
            }
        });
    }
    
    if (btnLimpar) {
        btnLimpar.addEventListener('click', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.limparDeposito) {
                window.sistemaEquipamentos.limparDeposito();
            }
        });
    }
}

// Configurar cria√ß√£o de itens (APENAS event listeners)
function configurarCriacaoItensBasico() {
    const itemTipoSelect = document.getElementById('item-tipo');
    const itemMagicoCheckbox = document.getElementById('item-magico');
    
    if (itemTipoSelect) {
        itemTipoSelect.addEventListener('change', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.atualizarCamposPorTipo) {
                window.sistemaEquipamentos.atualizarCamposPorTipo();
            }
        });
    }
    
    if (itemMagicoCheckbox) {
        itemMagicoCheckbox.addEventListener('change', function() {
            if (window.sistemaEquipamentos && window.sistemaEquipamentos.atualizarCamposMagicos) {
                window.sistemaEquipamentos.atualizarCamposMagicos();
            }
        });
    }
    
    // Adicionar listeners para atualizar preview em tempo real
    const inputsPreview = ['item-nome', 'item-peso', 'item-custo', 'item-descricao'];
    inputsPreview.forEach(id => {
        const input = document.getElementById(id);
        if (input) {
            input.addEventListener('input', function() {
                if (window.sistemaEquipamentos && window.sistemaEquipamentos.atualizarPreviewItem) {
                    window.sistemaEquipamentos.atualizarPreviewItem();
                }
            });
        }
    });
}

// Configurar navega√ß√£o do cat√°logo (APENAS event listeners)
function configurarNavegacaoCatalogoBasico() {
    const filtroEra = document.getElementById('filtro-era');
    const filtroTipo = document.getElementById('filtro-tipo');
    const buscaCatalogo = document.getElementById('busca-catalogo');
    
    if (filtroEra) {
        filtroEra.addEventListener('change', function() {
            if (window.catalogoEquipamentos && window.catalogoEquipamentos.filtrarCatalogo) {
                window.catalogoEquipamentos.filtrarCatalogo();
            }
        });
    }
    
    if (filtroTipo) {
        filtroTipo.addEventListener('change', function() {
            if (window.catalogoEquipamentos && window.catalogoEquipamentos.filtrarCatalogo) {
                window.catalogoEquipamentos.filtrarCatalogo();
            }
        });
    }
    
    if (buscaCatalogo) {
        buscaCatalogo.addEventListener('input', function() {
            if (window.catalogoEquipamentos && window.catalogoEquipamentos.filtrarCatalogo) {
                window.catalogoEquipamentos.filtrarCatalogo();
            }
        });
    }
}

// Fun√ß√£o wrapper para alternar sub-aba (mantida para compatibilidade)
function alternarSubTab(subtab) {
    document.querySelectorAll('.subtab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.subtab-content').forEach(c => c.classList.remove('active'));
    
    const btn = document.querySelector(`[data-subtab="${subtab}"]`);
    const content = document.getElementById(`subtab-${subtab}`);
    
    if (btn) btn.classList.add('active');
    if (content) content.classList.add('active');
    
    if (subtab === 'financeiro' && window.sistemaEquipamentos && window.sistemaEquipamentos.atualizarInterfaceFinanceiro) {
        setTimeout(() => {
            window.sistemaEquipamentos.atualizarInterfaceFinanceiro();
        }, 100);
    }
}

// Configurar bot√µes de valores r√°pidos (financeiro)
document.addEventListener('click', function(e) {
    // Bot√µes de valores r√°pidos
    if (e.target.closest('.botoes-valores')) {
        const botao = e.target.closest('button');
        if (botao && window.sistemaEquipamentos) {
            const texto = botao.textContent;
            const valor = parseInt(texto.replace(/[^0-9]/g, ''));
            
            if (texto.startsWith('+') && window.sistemaEquipamentos.adicionarDinheiro) {
                window.sistemaEquipamentos.adicionarDinheiro(valor);
            } else if (texto.startsWith('-') && window.sistemaEquipamentos.removerDinheiro) {
                window.sistemaEquipamentos.removerDinheiro(valor);
            }
        }
    }
});

// Fun√ß√µes wrapper que ser√£o chamadas pelo sistema principal
// Estas fun√ß√µes apenas redirecionam para o sistemaEquipamentos

// Fun√ß√µes do modal de quantidade
function aumentarQuantidade() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.aumentarQuantidade) {
        window.sistemaEquipamentos.aumentarQuantidade();
    }
}

function diminuirQuantidade() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.diminuirQuantidade) {
        window.sistemaEquipamentos.diminuirQuantidade();
    }
}

function fecharSubmenuQuantidade() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.fecharSubmenuQuantidade) {
        window.sistemaEquipamentos.fecharSubmenuQuantidade();
    }
}

function confirmarCompraQuantidade() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.confirmarCompraQuantidade) {
        window.sistemaEquipamentos.confirmarCompraQuantidade();
    }
}

// Fun√ß√µes do modal financeiro
function fecharModalSimples() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.fecharModalSimples) {
        window.sistemaEquipamentos.fecharModalSimples();
    }
}

function confirmarOperacao() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.confirmarOperacao) {
        window.sistemaEquipamentos.confirmarOperacao();
    }
}

// Fun√ß√µes de cria√ß√£o de itens
function limparFormCriacao() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.limparFormCriacao) {
        window.sistemaEquipamentos.limparFormCriacao();
    }
}

function criarItemPersonalizado() {
    if (window.sistemaEquipamentos && window.sistemaEquipamentos.criarItemPersonalizado) {
        window.sistemaEquipamentos.criarItemPersonalizado();
    }
}

// Registrar fun√ß√µes globalmente (para compatibilidade)
window.alternarSubTab = alternarSubTab;
window.aumentarQuantidade = aumentarQuantidade;
window.diminuirQuantidade = diminuirQuantidade;
window.fecharSubmenuQuantidade = fecharSubmenuQuantidade;
window.confirmarCompraQuantidade = confirmarCompraQuantidade;
window.fecharModalSimples = fecharModalSimples;
window.confirmarOperacao = confirmarOperacao;
window.limparFormCriacao = limparFormCriacao;
window.criarItemPersonalizado = criarItemPersonalizado;


</script>

      
        <!-- ABA RESUMO -->
        <div id="resumo" class="tab-content">
            <div class="loading">
                <div class="spinner"></div>
            </div>
        </div>

    </main> <!-- FIM DO MAIN -->

   <script>

      
    // Configura√ß√£o do Supabase
    const SUPABASE_URL = 'https://pujufdfhaxveuytkneqw.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB1anVmZGZoYXh2ZXV5dGtuZXF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNTkyODksImV4cCI6MjA3OTkzNTI4OX0.mzOwsmf8qIQ4HZqnXLEmq4D7M6fz4VH1YWpWP-BsFvc';
    
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    
    // Estado global do personagem
    let personagemAtual = {
        id: null,
        nome: 'Novo Personagem',
        pontos_totais: 150,
        pontos_gastos: 0,
        forca: 10,
        destreza: 10,
        inteligencia: 10,
        saude: 10,
    };

    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', function() {
        inicializarNavegacaoAbas();
        configurarEventListeners();
        carregarPersonagemDaURL();
    });

    // Navega√ß√£o entre abas
    function inicializarNavegacaoAbas() {
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active de todos
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Ativa a aba clicada
                this.classList.add('active');
                const tabId = this.getAttribute('data-tab');
                const tabContent = document.getElementById(tabId);
                
                if (tabContent) {
                    tabContent.classList.add('active');
                    
                    // Inicializa sistemas espec√≠ficos de cada aba
                    inicializarSistemasAba(tabId);
                }
            });
        });
    }

    // Inicializar sistemas espec√≠ficos de cada aba
    function inicializarSistemasAba(abaId) {
        switch(abaId) {
            case 'atributos':
                if (typeof inicializarAtributos === 'function') {
                    setTimeout(() => {
                        inicializarAtributos();
                    }, 100);
                }
                break;
                
            case 'caracteristicas':
                // Dispara evento para sistemas de caracter√≠sticas
                const eventoCaracteristicas = new CustomEvent('caracteristicasCarregadas');
                document.dispatchEvent(eventoCaracteristicas);
                break;
                
            case 'vantagens':
                // Sistema de vantagens ser√° inicializado aqui
                break;
                
            case 'pericias':
                // Sistema de per√≠cias ser√° inicializado aqui
                if (typeof inicializarSistemaPericias === 'function') {
                    setTimeout(() => {
                        inicializarSistemaPericias();
                    }, 100);
                }
                break;
        }
    }

    // Configurar event listeners
    function configurarEventListeners() {
        // Bot√µes do header
        const btnSalvar = document.getElementById('btnSalvar');
        const btnExcluir = document.getElementById('btnExcluir');
        const btnSair = document.getElementById('btnSair');
        
        if (btnSalvar) btnSalvar.addEventListener('click', salvarPersonagem);
        if (btnExcluir) btnExcluir.addEventListener('click', solicitarExclusao);
        if (btnSair) btnSair.addEventListener('click', sairSemSalvar);
        
        // Nome do personagem
        const charName = document.getElementById('charName');
        if (charName) {
            charName.addEventListener('input', function() {
                personagemAtual.nome = this.value;
            });
        }
    }

    // Carregar personagem da URL (se estiver editando)
    function carregarPersonagemDaURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const personagemId = urlParams.get('id');
        
        if (personagemId) {
            carregarPersonagemExistente(personagemId);
        }
    }

    // Salvar personagem
    async function salvarPersonagem() {
        try {
            const { data: { session } } = await supabase.auth.getSession();
            
            if (!session) {
                alert('Voc√™ precisa estar logado para salvar!');
                return;
            }

            // Coleta dados de todos os sistemas antes de salvar
            const dadosCompletos = {
                ...personagemAtual,
                user_id: session.user.id,
                updated_at: new Date().toISOString()
            };

            // Atualiza os dados dos atributos se o sistema existir
            if (typeof obterDadosAtributos === 'function') {
                const dadosAtributos = obterDadosAtributos();
                dadosCompletos.forca = dadosAtributos.ST;
                dadosCompletos.destreza = dadosAtributos.DX;
                dadosCompletos.inteligencia = dadosAtributos.IQ;
                dadosCompletos.saude = dadosAtributos.HT;
                dadosCompletos.pontos_gastos = dadosAtributos.PontosGastos;
            }

            let resultado;
            if (personagemAtual.id) {
                // Atualizar existente
                resultado = await supabase
                    .from('characters')
                    .update(dadosCompletos)
                    .eq('id', personagemAtual.id);
            } else {
                // Criar novo
                resultado = await supabase
                    .from('characters')
                    .insert([dadosCompletos])
                    .select();
                
                if (resultado.data && resultado.data[0]) {
                    personagemAtual.id = resultado.data[0].id;
                }
            }

            if (resultado.error) throw resultado.error;

            alert('Personagem salvo com sucesso!');
            window.location.href = 'personagens.html';

        } catch (error) {
            console.error('Erro ao salvar personagem:', error);
            alert('Erro ao salvar personagem: ' + error.message);
        }
    }

    // Carregar personagem existente
    async function carregarPersonagemExistente(personagemId) {
        try {
            const { data: personagem, error } = await supabase
                .from('characters')
                .select('*')
                .eq('id', personagemId)
                .single();

            if (error) throw error;

            personagemAtual = personagem;
            
            // Atualiza o nome do personagem
            const charName = document.getElementById('charName');
            if (charName) {
                charName.value = personagem.nome || 'Personagem Sem Nome';
            }
            
            // Carrega os dados nos atributos se a fun√ß√£o existir
            if (typeof carregarDadosAtributos === 'function') {
                carregarDadosAtributos({
                    ST: personagem.forca || 10,
                    DX: personagem.destreza || 10,
                    IQ: personagem.inteligencia || 10,
                    HT: personagem.saude || 10
                });
            }
            
        } catch (error) {
            console.error('Erro ao carregar personagem:', error);
            alert('Erro ao carregar personagem: ' + error.message);
        }
    }

    // Solicitar exclus√£o
    function solicitarExclusao() {
        if (confirm('Tem certeza que deseja excluir este personagem?\nEsta a√ß√£o n√£o pode ser desfeita!')) {
            excluirPersonagem();
        }
    }

    // Excluir personagem
    async function excluirPersonagem() {
        if (!personagemAtual.id) {
            // Personagem novo n√£o salvo
            window.location.href = 'personagens.html';
            return;
        }

        try {
            const { error } = await supabase
                .from('characters')
                .delete()
                .eq('id', personagemAtual.id);

            if (error) throw error;

            alert('Personagem exclu√≠do com sucesso!');
            window.location.href = 'personagens.html';

        } catch (error) {
            console.error('Erro ao excluir personagem:', error);
            alert('Erro ao excluir personagem: ' + error.message);
        }
    }

    // Sair sem salvar
    function sairSemSalvar() {
        if (confirm('Sair sem salvar as altera√ß√µes?')) {
            window.location.href = 'personagens.html';
        }
    }
    </script>

    <!-- SISTEMA DE ATRIBUTOS E CARACTER√çSTICAS -->
<script src="atributos.js"></script>
<script src="caracteristicas-fisicas.js"></script>
<script src="caracteristicas-altura-peso.js"></script>
<script src="caracteristicas-aparencia.js"></script>
<script src="caracteristicas-riqueza.js"></script>
<script src="caracteristicas-idiomas.js"></script>

<!-- SISTEMA DE VANTAGENS E DESVANTAGENS -->
<script src="catalogo-vantagens.js"></script>
<script src="catalogo-desvantagens.js"></script>
<script src="vantagens.js"></script>
<script src="desvantagens.js"></script>

<!-- SISTEMA DE PER√çCIAS -->
<script src="pericias-catalogo.js"></script>
<script src="sistema-pericias.js"></script>

<!-- SISTEMA DE T√âCNICAS (DEPENDE DAS PER√çCIAS) -->
<script src="tecnicas-catalogo.js"></script>
<script src="tecnicas.js"></script>

<!-- SISTEMA DE MAGIAS -->
<script src="catalogo-magias.js"></script>
<script src="magias.js"></script>

<!-- SISTEMA DE EQUIPAMENTOS -->
<script src="catalogo-equipamentos.js"></script>
<script src="equipamentos.js"></script>

</body>
</html>